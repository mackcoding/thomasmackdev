@page "/blog/1/omni-series-prerequisites"

@model thomasmack.dev.Pages.Blog.PrepModel
@{
}

@section Subheader {
                    Blog: Omni Deployment - Prerequisities
}

<div class="mt-6 max-w-full mx-auto px-4 lg:max-w-none lg:px-4" style="width: 100%; max-width: 80%;">
    <!-- Quick Links Navigation -->
    <div class="not-prose mb-8">
        <div class="border border-base-content/20 bg-base-200 rounded-2xl shadow-lg p-4 lg:p-6">
            <h2 class="text-lg font-bold mb-4">Quick Navigation</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-2 text-sm">
                <a href="#technologies-overview" class="link link-hover">Technologies Overview</a>
                <a href="#hosting-architecture" class="link link-hover">Hosting Architecture</a>
                <a href="#important-notes" class="link link-hover">Important Notes</a>
                <a href="#rationale" class="link link-hover">Rationale for This Setup</a>
                <a href="#prepping-tailscale" class="link link-hover">Prepping Tailscale</a>
                <a href="#access-controls" class="link link-hover">Configuring Access Controls</a>
                <a href="#configuration-breakdown" class="link link-hover">Configuration Breakdown</a>
                <a href="#architecture-goals" class="link link-hover">Architecture and Goals</a>
                <a href="#cluster-metadata" class="link link-hover">Cluster Metadata & Labels</a>
                <a href="#ip-allocation" class="link link-hover">IP Address Allocation</a>
                <a href="#naming-scheme" class="link link-hover">Host Naming Scheme</a>
                <a href="#required-packages" class="link link-hover">Required Packages</a>
                <a href="#required-tools" class="link link-hover">Required Tools</a>
                <a href="#next-steps" class="link link-hover">Next Steps</a>
            </div>
        </div>
    </div>

    <article class="prose prose-lg max-w-none">
        <div class="not-prose mb-12">
            <div class="flex flex-wrap gap-2 mb-6">
                <span class="badge badge-primary badge-sm">Omni Series</span>
                <span class="badge badge-info badge-sm">Prerequisites</span>
            </div>
            <h1 class="text-2xl md:text-3xl lg:text-4xl font-bold mb-6 leading-tight">Requirements and Prepwork</h1>
            <div class="flex flex-col sm:flex-row sm:items-center gap-4 sm:gap-6 text-sm text-base-content/60 mb-8">
                <div class="flex items-center gap-2">
                    <span class="icon-[iconoir--calendar] text-base"></span>
                    <time datetime="2025-08-05">August 5, 2025</time>
                </div>
                <div class="flex items-center gap-2">
                    <span class="icon-[iconoir--clock] text-base"></span>
                    <span>12 min read</span>
                </div>
            </div>
        </div>

        <div class="alert alert-info mb-12 p-4 lg:p-6">
            <span class="icon-[iconoir--info-circle] text-xl lg:text-2xl"></span>
            <div>
                <h3 class="font-bold mb-2">Part 1 of the Omni Series</h3>
                <div>Define prerequisites including Talos, Omni, Linode account, Proxmox, Tailscale, and Podman. Explain the architecture and tooling decisions for distributed Kubernetes.</div>
            </div>
        </div>

        <div class="space-y-8">
            <section id="technologies-overview">
                <h2 class="text-xl md:text-2xl font-bold mb-6">Technologies Overview</h2>
                <hr class="mb-6">
                <div class="space-y-4">
                    <p>In this series, we will be deploying the following technologies:</p>
                    <ul class="list-disc list-inside space-y-2 ml-4">
                        <li><a href="https://github.com/siderolabs/omni" class="link link-primary" target="_blank">Sidero Omni</a> - a self-hostable control plane for managing Talos-based Kubernetes clusters.</li>
                        <li><a href="https://github.com/siderolabs/talos" class="link link-primary" target="_blank">Sidero Talos</a> - a secure, immutable Linux distribution built for Kubernetes deployments.</li>
                        <li><a href="https://tailscale.com/" class="link link-primary" target="_blank">Tailscale</a> - a zero-config VPN built on WireGuard, enabling secure networking between nodes across locations.</li>
                        <li><a href="https://podman.io/" class="link link-primary" target="_blank">Podman</a> - a daemonless container engine for managing OCI containers and pods.</li>
                    </ul>
                    <p>All Ansible automation scripts used in this series are available in the following GitHub repositories:</p>
                    <div class="flex flex-wrap gap-2 mt-4">
                        <a href="https://github.com/mackcoding/ansible-infrastructure" class="btn bg-base-300 hover:bg-base-content/10 btn-sm" target="_blank">
                            <span class="icon-[iconoir--github] text-sm"></span>
                            ansible-infrastructure
                        </a>
                        <a href="https://github.com/mackcoding/terraform-infrastructure" class="btn bg-base-300 hover:bg-base-content/10 btn-sm" target="_blank">
                            <span class="icon-[iconoir--github] text-sm"></span>
                            terraform-infrastructure
                        </a>
                    </div>



                </div>
            </section>

            <section id="hosting-architecture">
                <h2 class="text-xl md:text-2xl font-bold mb-6">Hosting Architecture</h2>
                <hr class="mb-6">
                <div class="space-y-4">
                    <p>For this setup, we are using a hybrid hosting approach:</p>
                    <div class="overflow-x-auto">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Platform</th>
                                    <th>Role</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Proxmox</td>
                                    <td>Hybrid Nodes</td>
                                    <td>1 control plane node, 1 worker node</td>
                                </tr>
                                <tr>
                                    <td>Interserver VMs</td>
                                    <td>Control Plane</td>
                                    <td>Additional control plane nodes</td>
                                </tr>
                                <tr>
                                    <td>Linode VM</td>
                                    <td>Omni Controller</td>
                                    <td>Hosts the Sidero Omni control plane</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="alert alert-warning">
                        <span class="icon-[pixel--cloud] text-lg lg:text-xl"></span>
                        <div>
                            <div class="font-semibold">Hosting Notes</div>
                            <div class="text-sm">The Linode VM is dual-purpose, also running Netmaker for internal mesh networking (not covered in this series). You are not required to use Linode for Omni - any cloud VM or bare-metal host will work as long as it has internet access and a public IP. All control plane nodes are also configured to run workloads - we are not using dedicated control planes.</div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="important-notes">
                <h2 class="text-xl md:text-2xl font-bold mb-6">Important Notes</h2>
                <hr class="mb-6">
                <div class="space-y-4">
                    <p>This setup is intended for <strong>non-production</strong>, lightweight workloads such as experimentation, personal labs, or low-traffic services.</p>
                    <p>If you're deploying in a <strong>production environment</strong>, consider the following recommendations:</p>

                    <div class="overflow-x-auto">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Role</th>
                                    <th>Recommended Setup</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Control Plane</td>
                                    <td>3 dedicated <strong>bare-metal</strong> servers for high availability</td>
                                </tr>
                                <tr>
                                    <td>Worker Nodes</td>
                                    <td>3+ nodes, either bare-metal or high-performance VMs</td>
                                </tr>
                                <tr>
                                    <td>Omni Controller</td>
                                    <td>Dedicated VM or server with a public IP (not behind NAT)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="rationale">
                <h2 class="text-xl md:text-2xl font-bold mb-6">Rationale for This Setup</h2>
                <hr class="mb-6">
                <ul class="list-disc list-inside space-y-2 ml-4">
                    <li><strong>Low Traffic:</strong> The workloads hosted are not traffic-intensive, allowing VM-based control planes.</li>
                    <li><strong>Dual Role Nodes:</strong> All nodes - including control planes - are utilized as worker nodes to maximize resource usage in a small-scale environment.</li>
                    <li><strong>Separation:</strong> Control planes are hosted on Interserver VMs to isolate them from the Proxmox node, increasing uptime.</li>
                    <li><strong>Flexibility:</strong> Proxmox allows easy deployment of additional non-Kubernetes services alongside worker nodes.</li>
                    <li><strong>Dual-Purpose Hosting:</strong> The Linode VM serves multiple roles (Omni, Netmaker) to reduce cloud costs and infrastructure sprawl.</li>
                </ul>
            </section>

            <section id="prepping-tailscale">
                <h2 class="text-xl md:text-2xl font-bold mb-6">Prepping Tailscale</h2>
                <hr class="mb-6">
                <div class="space-y-4">
                    <p>To get started, we need to prepare our Tailscale environment.</p>
                    <ol class="list-decimal list-inside space-y-2 ml-4">
                        <li>Head over to the <a href="https://login.tailscale.com/start" class="link link-primary" target="_blank">Tailscale sign-up page</a> and create an account. If you already have an account, sign in.</li>
                        <li>After signing in, you'll be presented with a list of connected machines. For new accounts, this list will be empty.</li>
                        <li>Next, we'll configure <strong>Tailscale device tags</strong>. These tags help define routing and access control between different node types in our infrastructure.</li>
                    </ol>

                    <p>We'll be using the following tags for our setup:</p>

                    <div class="overflow-x-auto">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Tag Name</th>
                                    <th>IP Pool</th>
                                    <th>Description</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>core</code></td>
                                    <td>100.64.5.0/24</td>
                                    <td>Core infrastructure such as Proxmox hosts and the Omni controller</td>
                                </tr>
                                <tr>
                                    <td><code>talos-controlplane</code></td>
                                    <td>100.64.10.0/24</td>
                                    <td>Talos-based Kubernetes control plane nodes</td>
                                </tr>
                                <tr>
                                    <td><code>talos-worker</code></td>
                                    <td>100.64.20.0/24</td>
                                    <td>Talos-based Kubernetes worker nodes</td>
                                </tr>
                                <tr>
                                    <td><code>platform</code></td>
                                    <td>100.64.30.0/24</td>
                                    <td>Non-Kubernetes servers providing supporting services</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="alert alert-info">
                        <span class="icon-[material-symbols--inbox-customize-outline-rounded] text-lg lg:text-xl"></span>
                        <div>
                            <div class="font-semibold">Customization</div>
                            <div class="text-sm">These tags allow you to write fine-grained ACLs and route IP ranges per role. Feel free to modify the tags and IP ranges as needed to fit your environment.</div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="access-controls">
                <h2 class="text-xl md:text-2xl font-bold mb-6">Configuring Tailscale Access Controls</h2>
                <hr class="mb-6">
                <div class="space-y-4">
                    <p>To implement the tags and IP pools defined above, navigate to the <strong>Access controls</strong> section in the <a href="https://login.tailscale.com/admin/acls" class="link link-primary" target="_blank">Tailscale admin console</a> and apply the following configuration:</p>

                    <div class="relative">
                        <div class="mockup-code bg-base-300 mb-8">
                            <div class="bg-base-200 px-4 py-2 text-sm font-mono border-b border-base-content/10">
                                tailscale-acl.json
                            </div>
                            <div class="p-2 lg:p-4 overflow-x-auto">
                                <pre class="language-json text-xs lg:text-sm"><code id="tailscale-acl">{
  "acls": [
    {
      "action": "accept",
      "src": ["*"],
      "dst": ["*:*"]
    }
  ],
  "ssh": [
    {
      "action": "accept",
      "src": ["user@example.com"],
      "dst": ["tag:platform"],
      "users": ["user1"]
    }
  ],
  "tagOwners": {
    "tag:core":               ["user@example.com"],
    "tag:talos-controlplane": ["user@example.com"],
    "tag:talos-worker":       ["user@example.com"],
    "tag:platform":           ["user@example.com"]
  },
  "nodeAttrs": [
    {
      "target": ["tag:core"],
      "ipPool": ["100.64.5.0/24"]
    },
    {
      "target": ["tag:talos-controlplane"],
      "ipPool": ["100.64.10.0/24"]
    },
    {
      "target": ["tag:talos-worker"],
      "ipPool": ["100.64.20.0/24"]
    },
    {
      "target": ["tag:platform"],
      "ipPool": ["100.64.30.0/24"]
    },
    {
      "target": ["autogroup:member"],
      "attr": ["funnel"]
    }
  ]
}</code></pre>
                            </div>
                        </div>
                        <button class="btn btn-sm btn-ghost absolute top-2 right-2" onclick="copyToClipboard(this, '#tailscale-acl')">
                            <span class="icon-[iconoir--copy] text-sm"></span>
                        </button>
                    </div>

                    <div class="space-y-4">
                        <h3 class="text-lg lg:text-xl font-semibold">Configuration Notes</h3>
                        <ul class="list-disc list-inside space-y-2 ml-4">
                            <li>The <code>tag:platform</code> tag is used for standalone, non-Kubernetes systems such as CI/CD hosts or backup servers.</li>
                            <li>Modify <code>tagOwners</code> as needed to delegate tag ownership to other team members or service accounts.</li>
                            <li>The <code>"funnel"</code> attribute enables <a href="https://tailscale.com/funnel/" class="link link-primary" target="_blank">Tailscale Funnel</a> support on user devices.</li>
                        </ul>

                        <div class="alert alert-info">
                            <span class="icon-[iconoir--info-circle] text-lg lg:text-xl"></span>
                            <div>
                                <div class="font-semibold">Tailscale Funnel</div>
                                <div class="text-sm">Funnel allows secure public HTTPS exposure of local services without firewall or port forwarding. Keep the funnel attribute if you want to expose services publicly from your device, remove it if you are only using Tailscale for internal/private networking.</div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <section id="configuration-breakdown">
                <h2 class="text-xl md:text-2xl font-bold mb-6">Configuration Breakdown</h2>
                <hr class="mb-6">
                <div class="space-y-6">
                    <p>To better understand what this configuration is doing, here's a breakdown of each section:</p>

                    <div class="border border-base-content/20 bg-base-200 rounded-2xl shadow-lg p-4 lg:p-6">
                        <div class="tabs tabs-boxed">
                            <input type="radio" name="config_tabs" role="tab" class="tab btn bg-base-300 hover:bg-base-content/10 checked:bg-primary checked:text-primary-content" aria-label="ACLs" checked />
                            <div role="tabpanel" class="tab-content bg-base-300 border-base-300 rounded-box p-4 lg:p-6">
                                <h3 class="text-lg lg:text-xl font-semibold mb-4">Access Control Lists (ACLs)</h3>
                                <p class="mb-4">The <code>acls</code> section defines general traffic rules between nodes. In this example, it allows <em>all</em> nodes to communicate with each other over <em>any</em> port and protocol:</p>

                                <div class="relative">
                                    <div class="mockup-code bg-base-300 mb-4">
                                        <div class="p-2 lg:p-4 overflow-x-auto">
                                            <pre class="language-json text-xs lg:text-sm"><code id="acls-example">{
  "action": "accept",
  "src": ["*"],
  "dst": ["*:*"]
}</code></pre>
                                        </div>
                                    </div>
                                    <button class="btn btn-sm btn-ghost absolute top-2 right-2" onclick="copyToClipboard(this, '#acls-example')">
                                        <span class="icon-[iconoir--copy] text-sm"></span>
                                    </button>
                                </div>

                                <div class="alert alert-warning">
                                    <span class="icon-[iconoir--lock] text-lg lg:text-xl"></span>
                                    <div>You may wish to restrict this in production environments to enforce stricter network segmentation.</div>
                                </div>
                            </div>

                            <input type="radio" name="config_tabs" role="tab" class="tab btn bg-base-300 hover:bg-base-content/10 checked:bg-primary checked:text-primary-content" aria-label="SSH" />
                            <div role="tabpanel" class="tab-content bg-base-300 border-base-300 rounded-box p-4 lg:p-6">
                                <h3 class="text-lg lg:text-xl font-semibold mb-4">SSH Access</h3>
                                <p class="mb-4">This section defines who can initiate SSH sessions and to which devices. It allows a specific user to SSH into machines tagged with <code>platform</code>:</p>

                                <div class="relative">
                                    <div class="mockup-code bg-base-300 mb-4">
                                        <div class="p-2 lg:p-4 overflow-x-auto">
                                            <pre class="language-json text-xs lg:text-sm"><code id="ssh-example">{
  "action": "accept",
  "src": ["user@example.com"],
  "dst": ["tag:platform"],
  "users": ["user1", "user2"]
}</code></pre>
                                        </div>
                                    </div>
                                    <button class="btn btn-sm btn-ghost absolute top-2 right-2" onclick="copyToClipboard(this, '#ssh-example')">
                                        <span class="icon-[iconoir--copy] text-sm"></span>
                                    </button>
                                </div>
                            </div>

                            <input type="radio" name="config_tabs" role="tab" class="tab btn bg-base-300 hover:bg-base-content/10 checked:bg-primary checked:text-primary-content" aria-label="Tag Owners" />
                            <div role="tabpanel" class="tab-content bg-base-300 border-base-300 rounded-box p-4 lg:p-6">
                                <h3 class="text-lg lg:text-xl font-semibold mb-4">Tag Owners</h3>
                                <p class="mb-4">Defines which users are allowed to assign specific tags to their devices. This ensures only authorized users can associate machines with important roles:</p>

                                <div class="relative">
                                    <div class="mockup-code bg-base-300 mb-4">
                                        <div class="p-2 lg:p-4 overflow-x-auto">
                                            <pre class="language-json text-xs lg:text-sm"><code id="tag-owners-example">{
  "tag:core":               ["user@example.com"],
  "tag:talos-controlplane": ["user@example.com"],
  "tag:talos-worker":       ["user@example.com"],
  "tag:platform":           ["user@example.com"]
}</code></pre>
                                        </div>
                                    </div>
                                    <button class="btn btn-sm btn-ghost absolute top-2 right-2" onclick="copyToClipboard(this, '#tag-owners-example')">
                                        <span class="icon-[iconoir--copy] text-sm"></span>
                                    </button>
                                </div>
                            </div>

                            <input type="radio" name="config_tabs" role="tab" class="tab btn bg-base-300 hover:bg-base-content/10 checked:bg-primary checked:text-primary-content" aria-label="Node Attributes" />
                            <div role="tabpanel" class="tab-content bg-base-300 border-base-300 rounded-box p-4 lg:p-6">
                                <h3 class="text-lg lg:text-xl font-semibold mb-4">Node Attributes</h3>
                                <p class="mb-4">Used to assign attributes to specific tags. Here, each tag is associated with a static IP pool in the Tailscale subnet for predictable addressing:</p>

                                <div class="relative">
                                    <div class="mockup-code bg-base-300 mb-4">
                                        <div class="p-2 lg:p-4 overflow-x-auto">
                                            <pre class="language-json text-xs lg:text-sm"><code id="node-attrs-example">{
  "target": ["tag:talos-controlplane"],
  "ipPool": ["100.64.10.0/24"]
}</code></pre>
                                        </div>
                                    </div>
                                    <button class="btn btn-sm btn-ghost absolute top-2 right-2" onclick="copyToClipboard(this, '#node-attrs-example')">
                                        <span class="icon-[iconoir--copy] text-sm"></span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>


            <section id="architecture-goals">
                <h2 class="text-xl md:text-2xl font-bold mb-6">Architecture and Goals</h2>
                <hr class="mb-6">
                <div class="space-y-4">
                    <p>Once fully deployed, this system will allow us to:</p>
                    <ol class="list-decimal list-inside space-y-2 ml-4">
                        <li>Access internal services such as ArgoCD via Tailscale IP addresses.</li>
                        <li>Configure and manage Tailscale using Terraform.</li>
                        <li>Deploy and manage the <a href="https://github.com/siderolabs/omni" class="link link-primary" target="_blank">Sidero Omni</a> control plane using Ansible.</li>
                    </ol>
                </div>
            </section>

            <section id="cluster-metadata">
                <h2 class="text-xl md:text-2xl font-bold mb-6">Cluster Metadata & Labels</h2>
                <hr class="mb-6">
                <div class="space-y-4">
                    <p>We use custom labels in the Kubernetes cluster to describe node type and location:</p>

                    <div class="overflow-x-auto">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Label Key</th>
                                    <th>Example Value</th>
                                    <th>Purpose</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>topology.kubernetes.io/zone</code></td>
                                    <td><code>hosted</code> or <code>homelab</code></td>
                                    <td>Distinguishes between hosted VMs and local nodes</td>
                                </tr>
                                <tr>
                                    <td><code>topology.kubernetes.io/region</code></td>
                                    <td><code>us-east-ny-1</code></td>
                                    <td>Describes geographic region using standardized format</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>

                    <p class="mt-4">By utilizing custom zones and regions, we can enforce pod scheduling to run workloads in specific zones or regions based on requirements.</p>

                    <h3 class="text-lg lg:text-xl font-semibold mt-6">Region Format</h3>
                    <p>
                        <strong>Format:</strong> <code>&lt;country&gt;-&lt;direction&gt;-&lt;state&gt;-&lt;index&gt;</code><br>
                        <strong>Example:</strong> <code>us-east-ny-1</code>
                    </p>

                    <div class="overflow-x-auto">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Field</th>
                                    <th>Meaning</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Country</td>
                                    <td>ISO-2 country code (e.g., <code>us</code>)</td>
                                </tr>
                                <tr>
                                    <td>Direction</td>
                                    <td><code>east</code>, <code>west</code>, <code>south</code>, <code>north</code></td>
                                </tr>
                                <tr>
                                    <td>State</td>
                                    <td>Abbreviated state (e.g., <code>ny</code>, <code>de</code>)</td>
                                </tr>
                                <tr>
                                    <td>Index</td>
                                    <td>Numeric identifier to support multiples (e.g., <code>1</code>, <code>2</code>)</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="ip-allocation">
                <h2 class="text-xl md:text-2xl font-bold mb-6">IP Address Allocation</h2>
                <hr class="mb-6">
                <div class="overflow-x-auto">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Purpose</th>
                                <th>CIDR Range</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Control Plane</td>
                                <td><code>100.64.10.0/24</code></td>
                            </tr>
                            <tr>
                                <td>Worker Nodes</td>
                                <td><code>100.64.20.0/24</code></td>
                            </tr>
                            <tr>
                                <td>Misc. Services</td>
                                <td><code>100.64.30.0/24</code></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="naming-scheme">
                <h2 class="text-xl md:text-2xl font-bold mb-6">Host Naming Scheme</h2>
                <hr class="mb-6">
                <div class="space-y-4">
                    <p>
                        <strong>Format:</strong> <code>type-role-index</code><br>
                        <strong>Example:</strong> <code>pve1-cp-1</code>, <code>vm-cp-2</code>
                    </p>

                    <div class="overflow-x-auto">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Component</th>
                                    <th>Description</th>
                                    <th>Example Value</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>type</code></td>
                                    <td>Node type</td>
                                    <td><code>pve</code> (Proxmox host), <code>vm</code> (hosted VM)</td>
                                </tr>
                                <tr>
                                    <td><code>role</code></td>
                                    <td>Machine role</td>
                                    <td><code>cp</code> (control plane), <code>worker</code> (worker node)</td>
                                </tr>
                                <tr>
                                    <td><code>index</code></td>
                                    <td>Unique numeric suffix per role</td>
                                    <td><code>1</code>, <code>2</code>, etc.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <section id="required-packages">
                <h2 class="text-xl md:text-2xl font-bold mb-6">Required Packages</h2>
                <hr class="mb-6">
                <div class="space-y-6">
                    <div>
                        <h3 class="text-lg lg:text-xl font-semibold mb-4">Proxmox Hosts</h3>
                        <div class="overflow-x-auto">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Package Name</th>
                                        <th>Purpose</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>iscsi-tools</code></td>
                                        <td>iSCSI storage management</td>
                                    </tr>
                                    <tr>
                                        <td><code>util-linux-tools</code></td>
                                        <td>Mount helpers, fs tools, etc.</td>
                                    </tr>
                                    <tr>
                                        <td><code>qemu-guest-agent</code></td>
                                        <td>VM management and guest integration</td>
                                    </tr>
                                    <tr>
                                        <td><code>tailscale</code></td>
                                        <td>Secure internal networking</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-lg lg:text-xl font-semibold mb-4">Non-Proxmox Hosts (e.g., VMs)</h3>
                        <div class="overflow-x-auto">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Package Name</th>
                                        <th>Purpose</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><code>iscsi-tools</code></td>
                                        <td>iSCSI storage management</td>
                                    </tr>
                                    <tr>
                                        <td><code>util-linux-tools</code></td>
                                        <td>Mount helpers, fs tools, etc.</td>
                                    </tr>
                                    <tr>
                                        <td><code>tailscale</code></td>
                                        <td>Secure internal networking</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <section id="required-tools">
                <h2 class="text-xl md:text-2xl font-bold mb-6">Required Tools</h2>
                <hr class="mb-6">
                <div class="space-y-4">
                    <p>Before we get started, this guide assumes you have the following tools installed and configured:</p>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="border border-base-content/20 bg-base-200 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">
                                <a href="https://developer.hashicorp.com/terraform/downloads" class="link link-primary" target="_blank">Terraform</a>
                            </h4>
                            <p class="text-sm text-base-content/80">Used to provision infrastructure and configure Tailscale</p>
                        </div>
                        <div class="border border-base-content/20 bg-base-200 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">
                                <a href="https://docs.ansible.com/ansible/latest/installation_guide/installation_distros.html" class="link link-primary" target="_blank">Ansible</a>
                            </h4>
                            <p class="text-sm text-base-content/80">Used to automate server setup and Talos deployment</p>
                        </div>
                        <div class="border border-base-content/20 bg-base-200 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">
                                <a href="https://k9scli.io/topics/install/" class="link link-primary" target="_blank">k9s</a>
                            </h4>
                            <p class="text-sm text-base-content/80">Terminal-based UI to interact with Kubernetes clusters</p>
                        </div>
                        <div class="border border-base-content/20 bg-base-200 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">
                                <a href="https://www.talos.dev/v1.7/introduction/getting-started/#installing-talosctl" class="link link-primary" target="_blank">talosctl</a>
                            </h4>
                            <p class="text-sm text-base-content/80">CLI tool to manage Talos Linux clusters</p>
                        </div>
                        <div class="border border-base-content/20 bg-base-200 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">
                                <a href="https://github.com/siderolabs/omni#install" class="link link-primary" target="_blank">omnictl</a>
                            </h4>
                            <p class="text-sm text-base-content/80">CLI for managing Omni control planes</p>
                        </div>
                        <div class="border border-base-content/20 bg-base-200 rounded-lg p-4">
                            <h4 class="font-semibold mb-2">
                                <a href="https://tailscale.com/download" class="link link-primary" target="_blank">Tailscale</a>
                            </h4>
                            <p class="text-sm text-base-content/80">Mesh VPN used for secure node-to-node communication</p>
                        </div>
                    </div>

                    <div class="alert alert-success">
                        <span class="icon-[iconoir--check] text-lg lg:text-xl"></span>
                        <div>Ensure each of these tools is installed, in your PATH, and working before continuing.</div>
                    </div>
                </div>
            </section>

            <section id="next-steps">
                <h2 class="text-xl md:text-2xl font-bold mb-6">Next Steps</h2>
                <hr class="mb-6">
                <p>And with that, we are onward! 🚀</p>
            </section>
        </div>

        <div class="not-prose mt-16">
            <div class="border border-base-content/20 bg-base-200 rounded-2xl shadow-lg p-6 lg:p-8">
                <h3 class="text-lg lg:text-xl font-bold mb-4">What's Next?</h3>
                <p class="text-base-content/80 mb-6">Continue with Part 2 of the Omni Series where we'll provision and harden the Linode VPS that will host our Omni control plane.</p>
                <div class="flex justify-start">
                    <a href="/blog/2/omni-series-provisioning-linode-vps-for-omni" class="btn btn-primary btn-sm">
                        Part 2: Provisioning the Linode VPS for Omni
                        <span class="icon-[iconoir--arrow-right] text-sm"></span>
                    </a>
                </div>
            </div>
        </div>

        <div class="not-prose mt-12">
            <div class="divider font-semibold">Series Navigation</div>
            <div class="flex flex-wrap gap-3 justify-center">
                <span class="badge badge-success badge-sm sm:badge-lg text-xs sm:text-sm">Part 1: Requirements and Prepwork (Current)</span>
                <a href="/blog/2/omni-series-provisioning-linode-vps-for-omni" class="badge badge-outline badge-sm sm:badge-lg border-dotted hover:badge-success text-xs sm:text-sm">Part 2: Provisioning Linode VPS</a>
                <a href="#" class="badge badge-outline badge-sm sm:badge-lg border-dotted hover:badge-success text-xs sm:text-sm">Part 3: Installing Tailscale</a>
                <a href="#" class="badge badge-outline badge-sm sm:badge-lg border-dotted hover:badge-success text-xs sm:text-sm">Part 4: Bootstrapping Omni</a>
                <a href="#" class="badge badge-outline badge-sm sm:badge-lg border-dotted hover:badge-success text-xs sm:text-sm">Part 5: Preparing Talos Configs</a>
            </div>
        </div>
    </article>
</div>

<script src="~/js/blogpost.js"></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
